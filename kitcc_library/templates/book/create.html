{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}New Book{% endblock %}</h1>
{% endblock %}

{% block content %}
  <form method="get">
    <label for="title">Title</label>
    <input
      name="title" id="title" value="{{ request.args.get('title', default='') }}">
    <label for="author">Author</label>
    <input
      name="author" id="author" value="{{ request.args.get('author', default='') }}">
    <label for="publisher">Publisher</label>
    <input
      name="publisher" id="publisher" value="{{ request.args.get('publisher', default='') }}">
    <label for="ISBN">ISBN</label>
    <input
      name="ISBN" id="ISBN" value="{{ request.args.get('ISBN', default='') }}">
    <input type="submit" value="Search">
  </form>
  {% if not books %}
    <p>No books exist</p>
  {% else %}
    <table class="book-list">
      <colgroup>
        <col width="25%">
        <col width="25%">
        <col width="25%">
        <col width="25%">
        <col width="10%">
      </colgroup>
      <thead>
        <tr>
          <th>Title</th>
          <th>Author</th>
          <th>Publisher</th>
          <th>ISBN</th>
          <th>Resister</th>
        </tr>
      </thead>
      <tbody>
        {% for book in books %}
        <form method="post">
          <input type="hidden"
            name="title" id="title" value="{{ book['title'] }}">
          <input type="hidden"
            name="author" id="author" value="{{ book['author'] }}">
          <input type="hidden"
            name="publisher" id="publisher" value="{{ book['publisher'] }}">
          <input type="hidden"
            name="ISBN" id="ISBN" value="{{ book['ISBN'] }}">
          <tr>
            <td class="book-title">{{ book['title'] }}</td>
            <td class="book-author">{{ book['author'] }}</td>
            <td class="book-publisher">{{ book['publisher'] }}</td>
            <td class="book-isbn">{{ book['ISBN'] }}</td>
            <td class="book-register">
              <input type="submit" value="Resister">
            </td>
          </tr>
        </form>
        {% endfor %}
      </tbody>
    </table>
  {% endif %}
{% endblock %}
